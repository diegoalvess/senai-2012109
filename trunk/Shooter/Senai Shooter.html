<html>

<head>

<title>

SENAI Shooter!

</title>

<script src="js/introdução.js"></script>
<script src="js/creditos.js"></script>
<script src="js/nivel1.js"></script>
<script src="js/inimigos.js"></script>

</head>

<body>

<!--canvas principal onde acontece o jogo-->
<canvas width="800" height="600" id="main" style="border:10px solid #000000;"></canvas>

<script>

var canvas = document.getElementById("main");
var screen = canvas.getContext("2d");

var paused = false;

var introducao = new Cena_Intro();

var creditos = new Cena_Creditos();

var nivel1 = new Cena_Level1();

var CENAS = { INTRO: 0, CREDITOS: 1, LEVEL1: 2 }

var Cena_atual = CENAS.INTRO;


load();

function load()
{	
	console.log("load");

	if((true))//to do...
	{
		console.log("carreguei");

	loop();
	}
	else
	{
	console.log("nao carreguei");

	setTimeout(load, 30 );
	}
}


function loop()
{
	console.log("loop");

	//O LOOP CHAMA UPDATE E DRAW//

	update();

	draw();

	setTimeout(loop, 30 );

}


function update()
{	
	switch(Cena_atual)
	{
		case CENAS.INTRO:
		{
			introducao.update();	
		}
		break;
		case CENAS.CREDITOS:
		{
			creditos.update();
		}
		break;
		case CENAS.LEVEL1:
		{
			nivel1.update();
		}
		break;
	}
}


function draw()
{
	clear();

	switch(Cena_atual)
	{
		case CENAS.INTRO:
		{
			introducao.draw();
		}
		break;
		case CENAS.CREDITOS:
		{
			creditos.draw();
		}
		break;
		case CENAS.LEVEL1:
		{
			nivel1.draw();
		}
		break;
	}

}


function clear()
{
	screen.clearRect(0,0,800,600);
}

window.addEventListener('keydown', key_down, true);
window.addEventListener('keyup', key_up, true);
window.addEventListener('mousemove', mouse_move, true);
window.addEventListener('mouseup', mouse_up, true);
window.addEventListener('mousedown', mouse_down, true);


function key_down(key)
{
	switch(Cena_atual)
	{
		case CENAS.INTRO:
		{
			introducao.key_down(key);
		}
		break;
		case CENAS.CREDITOS:
		{
			creditos.key_down(key);
		}
		break;
		case CENAS.LEVEL1:
		{
			nivel1.key_down(key);
		}
		break;
	}
}


function key_up(key)
{

}

function mouse_move(mouse)
{

}

function mouse_up(mouse)
{

}


function mouse_down(mouse)
{
	switch(Cena_atual)
	{
		case CENAS.INTRO:
		{
			introducao.mouse_down(mouse);
		}
		break;
		case CENAS.CREDITOS:
		{
			creditos.mouse_down(mouse);
		}
		break;
		case CENAS.LEVEL1:
		{
			nivel1.mouse_down(mouse);
		}
		break;
	}
}


function Collide(x1, y1, w1, h1, x2, y2, w2, h2)
{	
	if((x1+w1<x2)//se rect1 esquerda rect2
	||(x1>x2+w2)//se rect1 direita rect2
	||(y1+h1<y2)//se rect1 acima rect2
	||(y1>y2+h2))//se rect1 abaixo rect2
	{
		return false;//nao colidiu
	}
	else
	{
		return true;//colidiu
	}
}


</script>

</body>

</html>